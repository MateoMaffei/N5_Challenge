CREATE DATABASE N5

USE N5

CREATE TABLE TipoPermiso (
    Id INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
    IdGuid UNIQUEIDENTIFIER NOT NULL,
    Descripcion VARCHAR(50)
)

CREATE TABLE Empleado (
    Id INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
    IdGuid UNIQUEIDENTIFIER NOT NULL,
    Nombre VARCHAR(50),
    Apellido VARCHAR(50)
)

CREATE TABLE Permiso (
    Id INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
    IdGuid UNIQUEIDENTIFIER NOT NULL,
    IdEmpleado INT NOT NULL,
    IdTipoPermiso INT NOT NULL,
    FechaSolicitud DATETIME,
    Estado BIT,
    FechaAprobacion DATETIME NULL,
    FechaVencimiento DATETIME NULL,
) 

ALTER TABLE Permiso ADD CONSTRAINT FK_Permiso_Empleado FOREIGN KEY (IdEmpleado) REFERENCES Empleado(Id);
ALTER TABLE Permiso ADD CONSTRAINT FK_Permiso_TipoPermiso FOREIGN KEY (IdTipoPermiso) REFERENCES TipoPermiso(Id);

INSERT INTO TipoPermiso VALUES 
('F6372E5F-38EC-46FC-86C2-9262440D0E5F','Lectura'),
('7E25EE8C-6241-416C-B391-87BC82674E68','Escritura'),
('390658D5-69E5-4410-8EFC-FFC3297701B2','Administración'),
('44CCC357-8259-4DA7-B6B2-6EC258C1F19E','Acceso a Funcionalidades'),
('F34679ED-F1A4-45B0-ADEC-A4A258B5FE2F','Acceso a Información Confidencial');

INSERT INTO Empleado VALUES
('2EDA0064-6DF0-49D0-A2B9-760AD8380E28', 'Juan', 'Pérez'),
('B541C814-BD2E-46DA-9F3B-E9D0190839F8', 'María', 'Gómez'),
('117EE7C4-84FF-4C73-BEC4-BA418FA1FC07', 'Carlos', 'Ramos'),
('8EA38955-E715-49C7-94FC-257392FA0224', 'Sofía', 'Martínez'),
('FE8B7948-FD46-4043-9E75-F72156E974D4', 'Pedro', 'García');